// ============================================
// INGREDIENT EMOJI MAPPING
// ============================================

export const INGREDIENT_EMOJIS: Record<string, string> = {
  // Produce - Vegetables
  tomato: 'ğŸ…',
  tomatoes: 'ğŸ…',
  spinach: 'ğŸ¥¬',
  lettuce: 'ğŸ¥¬',
  kale: 'ğŸ¥¬',
  cabbage: 'ğŸ¥¬',
  carrot: 'ğŸ¥•',
  carrots: 'ğŸ¥•',
  onion: 'ğŸ§…',
  onions: 'ğŸ§…',
  garlic: 'ğŸ§„',
  potato: 'ğŸ¥”',
  potatoes: 'ğŸ¥”',
  corn: 'ğŸŒ½',
  broccoli: 'ğŸ¥¦',
  cucumber: 'ğŸ¥’',
  zucchini: 'ğŸ¥’',
  pepper: 'ğŸ«‘',
  'bell pepper': 'ğŸ«‘',
  'green pepper': 'ğŸ«‘',
  'red pepper': 'ğŸŒ¶ï¸',
  chili: 'ğŸŒ¶ï¸',
  jalapeÃ±o: 'ğŸŒ¶ï¸',
  eggplant: 'ğŸ†',
  mushroom: 'ğŸ„',
  mushrooms: 'ğŸ„',
  avocado: 'ğŸ¥‘',
  celery: 'ğŸ¥¬',
  asparagus: 'ğŸ¥¦',
  peas: 'ğŸ«›',
  'green beans': 'ğŸ«›',
  beans: 'ğŸ«˜',

  // Produce - Fruits
  apple: 'ğŸ',
  apples: 'ğŸ',
  banana: 'ğŸŒ',
  bananas: 'ğŸŒ',
  orange: 'ğŸŠ',
  oranges: 'ğŸŠ',
  lemon: 'ğŸ‹',
  lemons: 'ğŸ‹',
  lime: 'ğŸ‹',
  grape: 'ğŸ‡',
  grapes: 'ğŸ‡',
  strawberry: 'ğŸ“',
  strawberries: 'ğŸ“',
  blueberry: 'ğŸ«',
  blueberries: 'ğŸ«',
  watermelon: 'ğŸ‰',
  melon: 'ğŸˆ',
  peach: 'ğŸ‘',
  pear: 'ğŸ',
  cherry: 'ğŸ’',
  cherries: 'ğŸ’',
  pineapple: 'ğŸ',
  mango: 'ğŸ¥­',
  coconut: 'ğŸ¥¥',
  kiwi: 'ğŸ¥',

  // Dairy
  milk: 'ğŸ¥›',
  cheese: 'ğŸ§€',
  butter: 'ğŸ§ˆ',
  egg: 'ğŸ¥š',
  eggs: 'ğŸ¥š',
  yogurt: 'ğŸ¥›',
  cream: 'ğŸ¥›',
  'sour cream': 'ğŸ¥›',
  'cream cheese': 'ğŸ§€',
  parmesan: 'ğŸ§€',
  mozzarella: 'ğŸ§€',
  cheddar: 'ğŸ§€',

  // Meat & Protein
  chicken: 'ğŸ—',
  'chicken breast': 'ğŸ—',
  'chicken thigh': 'ğŸ—',
  turkey: 'ğŸ¦ƒ',
  beef: 'ğŸ¥©',
  steak: 'ğŸ¥©',
  'ground beef': 'ğŸ¥©',
  pork: 'ğŸ¥“',
  bacon: 'ğŸ¥“',
  ham: 'ğŸ¥“',
  sausage: 'ğŸŒ­',
  lamb: 'ğŸ–',
  fish: 'ğŸŸ',
  salmon: 'ğŸŸ',
  tuna: 'ğŸŸ',
  shrimp: 'ğŸ¦',
  crab: 'ğŸ¦€',
  lobster: 'ğŸ¦',
  tofu: 'ğŸ§ˆ',

  // Bread & Grains
  bread: 'ğŸ',
  toast: 'ğŸ',
  rice: 'ğŸš',
  pasta: 'ğŸ',
  noodles: 'ğŸœ',
  'spaghetti': 'ğŸ',
  flour: 'ğŸŒ¾',
  oats: 'ğŸŒ¾',
  cereal: 'ğŸ¥£',

  // Pantry
  oil: 'ğŸ«’',
  'olive oil': 'ğŸ«’',
  'vegetable oil': 'ğŸ«’',
  honey: 'ğŸ¯',
  sugar: 'ğŸ¬',
  salt: 'ğŸ§‚',
  vinegar: 'ğŸ«’',
  'soy sauce': 'ğŸ¥¢',

  // Condiments
  ketchup: 'ğŸ…',
  mustard: 'ğŸŸ¡',
  mayonnaise: 'ğŸ¥š',
  'hot sauce': 'ğŸŒ¶ï¸',

  // Beverages
  coffee: 'â˜•',
  tea: 'ğŸµ',
  juice: 'ğŸ§ƒ',
  water: 'ğŸ’§',
  wine: 'ğŸ·',
  beer: 'ğŸº',

  // Nuts & Seeds
  peanut: 'ğŸ¥œ',
  peanuts: 'ğŸ¥œ',
  almond: 'ğŸŒ°',
  almonds: 'ğŸŒ°',
  walnut: 'ğŸŒ°',
  walnuts: 'ğŸŒ°',
  cashew: 'ğŸŒ°',
  cashews: 'ğŸŒ°',

  // Herbs & Spices
  basil: 'ğŸŒ¿',
  mint: 'ğŸŒ¿',
  parsley: 'ğŸŒ¿',
  cilantro: 'ğŸŒ¿',
  oregano: 'ğŸŒ¿',
  thyme: 'ğŸŒ¿',
  rosemary: 'ğŸŒ¿',
  ginger: 'ğŸ«š',
  cinnamon: 'ğŸŸ¤',

  // Default
  default: 'ğŸ¥—',
};

/**
 * Get emoji for an ingredient by name
 */
export function getIngredientEmoji(name: string): string {
  const key = name.toLowerCase().trim();

  // Try exact match first
  if (INGREDIENT_EMOJIS[key]) {
    return INGREDIENT_EMOJIS[key];
  }

  // Try partial match
  for (const [ingredientKey, emoji] of Object.entries(INGREDIENT_EMOJIS)) {
    if (key.includes(ingredientKey) || ingredientKey.includes(key)) {
      return emoji;
    }
  }

  return INGREDIENT_EMOJIS.default;
}

/**
 * Convert confidence level to percentage
 */
export function confidenceToPercent(confidence: 'high' | 'medium' | 'low'): number {
  switch (confidence) {
    case 'high':
      return 97;
    case 'medium':
      return 85;
    case 'low':
      return 68;
    default:
      return 85;
  }
}

// Background colors for ingredient cards (light mode)
export const CATEGORY_BG_COLORS: Record<string, string> = {
  produce: '#F0FDF4',
  meat: '#FEF2F2',
  dairy: '#FFF7ED',
  pantry: '#FFFBEB',
  spices: '#ECFDF5',
  frozen: '#EFF6FF',
  beverage: '#F0F9FF',
  condiment: '#FEF3C7',
  other: '#F9FAFB',
};

// Background colors for ingredient cards (dark mode)
export const CATEGORY_DARK_BG_COLORS: Record<string, string> = {
  produce: 'rgba(34, 197, 94, 0.1)',
  meat: 'rgba(239, 68, 68, 0.1)',
  dairy: 'rgba(249, 115, 22, 0.1)',
  pantry: 'rgba(234, 179, 8, 0.1)',
  spices: 'rgba(16, 185, 129, 0.1)',
  frozen: 'rgba(59, 130, 246, 0.1)',
  beverage: 'rgba(14, 165, 233, 0.1)',
  condiment: 'rgba(245, 158, 11, 0.1)',
  other: 'rgba(156, 163, 175, 0.1)',
};

/**
 * Get background colors for an ingredient card
 */
export function getIngredientColors(category: string): {
  bgColor: string;
  darkBgColor: string;
} {
  return {
    bgColor: CATEGORY_BG_COLORS[category] || '#F9FAFB',
    darkBgColor: CATEGORY_DARK_BG_COLORS[category] || 'rgba(156, 163, 175, 0.1)',
  };
}

/**
 * Generate a random position for marker display on the image
 */
export function generateMarkerPosition(index: number, total: number): { top: string; left: string } {
  const cols = Math.ceil(Math.sqrt(total));
  const row = Math.floor(index / cols);
  const col = index % cols;

  const cellWidth = 60 / cols;
  const cellHeight = 40 / Math.ceil(total / cols);

  const baseTop = 25 + row * cellHeight;
  const baseLeft = 20 + col * cellWidth;

  const randomTop = baseTop + Math.random() * (cellHeight * 0.5);
  const randomLeft = baseLeft + Math.random() * (cellWidth * 0.5);

  return {
    top: `${Math.min(65, Math.max(25, randomTop))}%`,
    left: `${Math.min(80, Math.max(15, randomLeft))}%`,
  };
}
